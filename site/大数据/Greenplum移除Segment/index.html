<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        <link rel="canonical" href="https://wiki.xlz999.top/%E5%A4%A7%E6%95%B0%E6%8D%AE/Greenplum%E7%A7%BB%E9%99%A4Segment/">
        <link rel="shortcut icon" href="../../img/favicon.ico">
        <title>Greenplum移除Segment - 玄凌子知识库</title>
        <link href="../../css/bootstrap.min.css" rel="stylesheet">
        <link href="../../css/font-awesome.min.css" rel="stylesheet">
        <link href="../../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css">
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/yaml.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/java.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/kotlin.min.js"></script>
        <script>hljs.highlightAll();</script> 
    </head>

    <body>
        <div class="navbar fixed-top navbar-expand-lg navbar-dark bg-primary">
            <div class="container">
                <a class="navbar-brand" href="../..">玄凌子知识库</a>
                <!-- Expander button -->
                <button type="button" class="navbar-toggler" data-toggle="collapse" data-target="#navbar-collapse">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <!-- Expanded navigation -->
                <div id="navbar-collapse" class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li class="navitem">
                                <a href="../.." class="nav-link">关于我</a>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Java <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../Java/JPA%E5%88%86%E9%A1%B5%E6%9C%80%E5%A4%A7%E6%9D%A1%E6%95%B0%E9%99%90%E5%88%B6%E4%BF%AE%E6%94%B9/" class="dropdown-item">JPA分页最大条数限制修改</a>
</li>
                                    
<li>
    <a href="../../Java/Maven/" class="dropdown-item">Maven 使用</a>
</li>
                                    
<li>
    <a href="../../Java/github%E8%AE%BF%E9%97%AE/" class="dropdown-item">Github访问</a>
</li>
                                    
<li>
    <a href="../../Java/gradle%E8%87%AA%E5%AE%9A%E4%B9%89%E5%AD%98%E5%82%A8%E8%B7%AF%E5%BE%84/" class="dropdown-item">Gradle自定义存储路径</a>
</li>
                                    
<li>
    <a href="../../Java/logback%E9%85%8D%E7%BD%AE%E6%A8%A1%E6%9D%BF/" class="dropdown-item">Logback配置模板</a>
</li>
                                    
<li>
    <a href="../../Java/mvn%E6%89%A7%E8%A1%8C%E6%B7%B7%E7%94%A8jdk8%E5%92%8C11/" class="dropdown-item">Mvn执行混用jdk8和11</a>
</li>
                                    
<li>
    <a href="../../Java/openjdk%E6%97%A0%E6%B3%95%E7%94%9F%E6%88%90%E9%AA%8C%E8%AF%81%E7%A0%81%E8%A7%A3%E5%86%B3/" class="dropdown-item">基于alpine的openjdk8无法生成验证码的解决</a>
</li>
                                    
<li>
    <a href="../../Java/%E4%BF%9D%E7%95%99%E7%AB%AF%E5%8F%A3%E5%8D%A0%E7%94%A8%E9%97%AE%E9%A2%98/" class="dropdown-item">保留端口占用问题</a>
</li>
                                    
<li>
    <a href="../../Java/%E6%97%A5%E6%9C%9F%E6%A0%BC%E5%BC%8F%E7%9F%A5%E8%AF%86%E7%82%B9/" class="dropdown-item">YYYY和yyyy的区别</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Python <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../Python/JupyterNotebook%E5%AE%89%E8%A3%85/" class="dropdown-item">Jupyter Notebook 安装</a>
</li>
                                    
<li>
    <a href="../../Python/pypi%E6%BA%90/" class="dropdown-item">Pypi源</a>
</li>
                                    
<li>
    <a href="../../Python/%E5%9B%BE%E7%89%87%E9%9A%90%E5%86%99%E6%9C%AF/" class="dropdown-item">图片隐写术</a>
</li>
                                    
<li>
    <a href="../../Python/%E5%AE%89%E8%A3%85ta-lib/" class="dropdown-item">安装ta lib</a>
</li>
                                    
<li>
    <a href="../../Python/%E6%89%93%E5%8C%85%E5%B7%A5%E5%85%B7/" class="dropdown-item">打包工具</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Docker <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../docker/Centos%E5%9C%A8%E7%BA%BF%E5%AE%89%E8%A3%85docker/" class="dropdown-item">Centos在线安装docker</a>
</li>
                                    
<li>
    <a href="../../docker/K3S%E5%AE%89%E8%A3%85/" class="dropdown-item">K3S安装</a>
</li>
                                    
<li>
    <a href="../../docker/Linux%E5%9C%A8%E7%BA%BF%E5%AE%89%E8%A3%85docker/" class="dropdown-item">Linux在线安装docker</a>
</li>
                                    
<li>
    <a href="../../docker/Pg14%E7%94%9F%E4%BA%A7%E7%8E%AF%E5%A2%83%E9%95%9C%E5%83%8F%E6%9E%84%E5%BB%BA/" class="dropdown-item">Pg14生产环境镜像构建</a>
</li>
                                    
<li>
    <a href="../../docker/Swarm%E9%9B%86%E7%BE%A4%E4%BD%BF%E7%94%A8%E8%AF%B4%E6%98%8E/" class="dropdown-item">Swarm集群使用说明</a>
</li>
                                    
<li>
    <a href="../../docker/debian%E6%9B%B4%E6%96%B0source/" class="dropdown-item">debian容器更新source.list</a>
</li>
                                    
<li>
    <a href="../../docker/docker%E5%AE%B9%E5%99%A8%E5%87%BA%E7%8E%B0%E6%93%8D%E4%BD%9C%E4%B8%8D%E5%85%81%E8%AE%B8%E9%94%99%E8%AF%AF/" class="dropdown-item">Docker容器出现操作不允许错误</a>
</li>
                                    
<li>
    <a href="../../docker/docker%E5%AE%B9%E5%99%A8%E7%9B%B8%E5%85%B3/" class="dropdown-item">docker容器相关</a>
</li>
                                    
<li>
    <a href="../../docker/seaweedfs%E4%BD%9C%E4%B8%BA%E5%88%86%E5%B8%83%E5%BC%8F%E5%AD%98%E5%82%A8%E6%8F%92%E4%BB%B6/" class="dropdown-item">Seaweedfs作为分布式存储插件</a>
</li>
                                    
<li>
    <a href="../../docker/wsl2%E6%A1%A5%E6%8E%A5/" class="dropdown-item">Wsl2桥接</a>
</li>
                                    
<li>
    <a href="../../docker/%E5%9F%BA%E4%BA%8E%E5%AE%B9%E5%99%A8%E7%9A%84nfs%E6%9C%8D%E5%8A%A1/" class="dropdown-item">基于容器的nfs服务</a>
</li>
                                    
<li>
    <a href="../../docker/%E5%AE%B9%E5%99%A8%E4%BD%BF%E7%94%A8%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9/" class="dropdown-item">容器使用注意事项</a>
</li>
                                    
<li>
    <a href="../../docker/%E7%A6%81%E6%AD%A2%E5%AE%B9%E5%99%A8%E8%AE%BF%E9%97%AE%E5%A4%96%E7%BD%91/" class="dropdown-item">禁止容器访问外网</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Linux <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../linux/Alpine%E4%BD%BF%E7%94%A8%E6%B8%85%E5%8D%8E%E6%BA%90/" class="dropdown-item">Alpine使用清华源</a>
</li>
                                    
<li>
    <a href="../../linux/CentOS%E5%AE%8C%E7%BE%8E%E5%8D%87%E7%BA%A7gcc%E7%89%88%E6%9C%AC%E6%96%B9%E6%B3%95/" class="dropdown-item">CentOS完美升级gcc版本方法</a>
</li>
                                    
<li>
    <a href="../../linux/Centos7%E6%9B%B4%E6%96%B0%E5%86%85%E6%A0%B8/" class="dropdown-item">Centos7更新内核</a>
</li>
                                    
<li>
    <a href="../../linux/Centos7%E6%9B%B4%E6%96%B0%E8%87%AA%E5%B8%A6%E7%9A%84openssh%E4%BF%AE%E5%A4%8D%E6%BC%8F%E6%B4%9E/" class="dropdown-item">Centos7更新openssh修复漏洞</a>
</li>
                                    
<li>
    <a href="../../linux/FIO%E6%B5%8B%E8%AF%95%E7%A3%81%E7%9B%98IO/" class="dropdown-item">IO测试</a>
</li>
                                    
<li>
    <a href="../../linux/Linux_LVM%E5%88%86%E5%8C%BA%E6%89%A9%E5%AE%B9/" class="dropdown-item">LVM分区扩容</a>
</li>
                                    
<li>
    <a href="../../linux/Nginx%E9%85%8D%E7%BD%AE%E8%AF%B4%E6%98%8E/" class="dropdown-item">Nginx配置说明</a>
</li>
                                    
<li>
    <a href="../../linux/centos7_selinux/" class="dropdown-item">修复Centos7的SELINUX错误</a>
</li>
                                    
<li>
    <a href="../../linux/centos7%E5%8D%95%E7%94%A8%E6%88%B7%E6%A8%A1%E5%BC%8F/" class="dropdown-item">Centos7单用户模式</a>
</li>
                                    
<li>
    <a href="../../linux/centos_update_gcc/" class="dropdown-item">CentOS完美升级gcc版本方法</a>
</li>
                                    
<li>
    <a href="../../linux/cron/" class="dropdown-item">cron定时任务常见问题</a>
</li>
                                    
<li>
    <a href="../../linux/cron%E5%AE%9A%E6%97%B6%E4%BB%BB%E5%8A%A1%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98/" class="dropdown-item">cron</a>
</li>
                                    
<li>
    <a href="../../linux/cron%E9%98%B2%E6%AD%A2%E9%87%8D%E5%A4%8D%E6%89%A7%E8%A1%8C/" class="dropdown-item">cron防止重复执行</a>
</li>
                                    
<li>
    <a href="../../linux/iperf3%E5%B8%A6%E5%AE%BD%E6%B5%8B%E8%AF%95/" class="dropdown-item">Iperf3带宽测试</a>
</li>
                                    
<li>
    <a href="../../linux/n2n/" class="dropdown-item">服务节点</a>
</li>
                                    
<li>
    <a href="../../linux/net_safe/" class="dropdown-item">网络安全防护</a>
</li>
                                    
<li>
    <a href="../../linux/net_speed_test/" class="dropdown-item">带宽测试</a>
</li>
                                    
<li>
    <a href="../../linux/nfs%E6%90%AD%E5%BB%BA%E4%B8%8E%E4%BD%BF%E7%94%A8/" class="dropdown-item">nfs搭建与使用</a>
</li>
                                    
<li>
    <a href="../../linux/nginx/" class="dropdown-item">nginx负载均衡</a>
</li>
                                    
<li>
    <a href="../../linux/tcpdump%E6%8A%93%E5%8C%85/" class="dropdown-item">tcpdump抓包</a>
</li>
                                    
<li>
    <a href="../../linux/update_centos7_kernel/" class="dropdown-item">Centos7 升级内核版本</a>
</li>
                                    
<li>
    <a href="../../linux/%E4%BF%AE%E5%A4%8DCentos7%E7%9A%84SELINUX%E9%94%99%E8%AF%AF/" class="dropdown-item">修复Centos7的SELINUX错误</a>
</li>
                                    
<li>
    <a href="../../linux/%E5%90%84%E9%A1%B9%E6%80%A7%E8%83%BD%E5%8F%82%E6%95%B0%E7%9B%91%E6%B5%8B/" class="dropdown-item">性能参数监测</a>
</li>
                                    
<li>
    <a href="../../linux/%E5%9C%A8linux%E9%80%9A%E8%BF%87docker%E8%BF%90%E8%A1%8C%E5%BE%AE%E4%BF%A1/" class="dropdown-item">在linux通过docker运行微信</a>
</li>
                                    
<li>
    <a href="../../linux/%E6%96%B0%E6%9C%8D%E5%8A%A1%E5%99%A8%E9%85%8D%E7%BD%AE/" class="dropdown-item">新服务器基本配置流程</a>
</li>
                                    
<li>
    <a href="../../linux/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8%E9%98%B2%E6%8A%A4/" class="dropdown-item">安全防护</a>
</li>
                                    
<li>
    <a href="../../linux/%E9%92%88%E5%AF%B9%E5%A4%A7%E6%95%B0%E6%8D%AE%E7%BB%84%E4%BB%B6%E7%9A%84NFS%E6%8C%82%E8%BD%BD%E5%8F%82%E6%95%B0/" class="dropdown-item">针对大数据组件的NFS挂载参数</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Store <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../store/seaweedfs/" class="dropdown-item">Seaweedfs</a>
</li>
                                    
<li>
    <a href="../../store/%E5%90%8C%E7%A8%8B%E6%97%85%E8%A1%8Cseaweedfs%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5/" class="dropdown-item">同程旅行Seaweedfs最佳实践</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">中医 <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../%E4%B8%AD%E5%8C%BB/%E4%BA%94%E6%AD%A5%E5%AD%A6%E7%BA%AF%E6%AD%A3%E4%B8%AD%E5%8C%BB/" class="dropdown-item">倪海厦｜跟着这五个步骤学好纯正中医</a>
</li>
                                    
<li>
    <a href="../../%E4%B8%AD%E5%8C%BB/%E4%BB%80%E4%B9%88%E6%83%85%E5%86%B5%E9%80%82%E5%90%88%E7%9C%8B%E4%B8%AD%E5%8C%BB%E4%BB%80%E4%B9%88%E6%83%85%E5%86%B5%E9%80%82%E5%90%88%E7%9C%8B%E8%A5%BF%E5%8C%BB/" class="dropdown-item">什么情况适合看中医什么情况适合看西医</a>
</li>
                                    
<li>
    <a href="../../%E4%B8%AD%E5%8C%BB/%E5%8D%81%E6%9D%A1%E5%81%A5%E5%BA%B7%E5%88%A4%E5%AE%9A%E6%A0%87%E5%87%86/" class="dropdown-item">十条健康判定标准</a>
</li>
                                    
<li>
    <a href="../../%E4%B8%AD%E5%8C%BB/%E5%A4%A7%E5%8C%BB%E7%B2%BE%E8%AF%9A/" class="dropdown-item">大医精诚</a>
</li>
                                    
<li>
    <a href="../../%E4%B8%AD%E5%8C%BB/%E6%84%9F%E5%86%92%E7%BB%8F%E6%96%B9%E9%80%89%E8%8D%AF%E5%9B%BE/" class="dropdown-item">感冒经方选药图</a>
</li>
                                    
<li>
    <a href="../../%E4%B8%AD%E5%8C%BB/%E6%9C%AC%E8%8D%89/" class="dropdown-item">本草笔记</a>
</li>
                                    
<li>
    <a href="../../%E4%B8%AD%E5%8C%BB/%E6%B1%A4%E6%B6%B2%E7%BB%8F%E6%B3%95/" class="dropdown-item">汤液经法</a>
</li>
                                    
<li>
    <a href="../../%E4%B8%AD%E5%8C%BB/%E8%8D%AF%E9%A3%9F%E5%90%8C%E6%BA%90%E7%9B%AE%E5%BD%952023/" class="dropdown-item">药食同源目录2023</a>
</li>
                                    
<li>
    <a href="../../%E4%B8%AD%E5%8C%BB/%E8%BF%90%E5%8A%A8%E5%81%A5%E5%BA%B7%E4%B8%8E%E5%90%A6%E6%A0%87%E5%87%86/" class="dropdown-item">运动健康与否标准</a>
</li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">灵枢</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../%E4%B8%AD%E5%8C%BB/%E7%81%B5%E6%9E%A2/%E4%B8%AD%E5%8C%BB%E5%9F%BA%E7%A1%80/" class="dropdown-item">中医基础</a>
</li>
            
<li>
    <a href="../../%E4%B8%AD%E5%8C%BB/%E7%81%B5%E6%9E%A2/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" class="dropdown-item">人纪针灸学习笔记</a>
</li>
            
<li>
    <a href="../../%E4%B8%AD%E5%8C%BB/%E7%81%B5%E6%9E%A2/%E5%B0%8F%E5%84%BF%E4%B8%80%E8%88%AC%E6%84%9F%E5%86%92%E9%87%8D%E6%84%9F%E5%86%92%E7%A7%AF%E9%A3%9F%E7%9A%84%E6%8E%A8%E6%8B%BF%E6%89%8B%E6%B3%95/" class="dropdown-item">小儿一般感冒重感冒积食的推拿手法</a>
</li>
            
<li>
    <a href="../../%E4%B8%AD%E5%8C%BB/%E7%81%B5%E6%9E%A2/%E5%B8%B8%E7%94%A8%E5%85%BB%E7%94%9F%E7%A9%B4%E4%BD%8D/" class="dropdown-item">常用养生穴位</a>
</li>
            
<li>
    <a href="../../%E4%B8%AD%E5%8C%BB/%E7%81%B5%E6%9E%A2/%E5%B8%B8%E8%A7%81%E7%97%85%E7%A9%B4%E4%BD%8D%E7%96%97%E6%B3%95/" class="dropdown-item">常见病穴位疗法</a>
</li>
            
<li>
    <a href="../../%E4%B8%AD%E5%8C%BB/%E7%81%B5%E6%9E%A2/%E7%83%A7%E5%B1%B1%E7%81%AB%E4%B8%8E%E9%80%8F%E5%A4%A9%E5%87%89%E6%89%8B%E6%B3%95/" class="dropdown-item">烧山火与透天凉手法</a>
</li>
            
<li>
    <a href="../../%E4%B8%AD%E5%8C%BB/%E7%81%B5%E6%9E%A2/%E7%BB%8F%E7%BB%9C%E5%B9%B2%E6%94%AF/" class="dropdown-item">经络天干</a>
</li>
            
<li>
    <a href="../../%E4%B8%AD%E5%8C%BB/%E7%81%B5%E6%9E%A2/%E9%AB%98%E8%A1%80%E5%8E%8B%E8%BE%A8%E8%AF%81%E4%B8%8E%E6%96%B9%E9%92%88/" class="dropdown-item">高血压#主要由于肝肾阴阳失调，也可兼夹痰湿，其中：</a>
</li>
            
<li>
    <a href="../../%E4%B8%AD%E5%8C%BB/%E7%81%B5%E6%9E%A2/%E9%BA%A6%E7%B2%92%E8%82%BF%E8%BE%A9%E8%AF%81%E4%B8%8E%E6%96%B9%E9%92%88/" class="dropdown-item">麦粒肿#表现为眼睑部皮脂腺或脸板腺的急性化脓性炎症，初起眼睑部有痒感或微肿，以后红肿疼痛，有明显压痛，破溃流脓后疼痛即可减轻。</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">素问</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../%E4%B8%AD%E5%8C%BB/%E7%B4%A0%E9%97%AE/%E5%B8%B8%E7%94%A8%E6%96%B9%E5%89%82/" class="dropdown-item">常用方剂</a>
</li>
            
<li>
    <a href="../../%E4%B8%AD%E5%8C%BB/%E7%B4%A0%E9%97%AE/%E6%88%91%E7%9A%84%E4%B8%AD%E5%8C%BB%E4%B9%8B%E8%B7%AF_%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97/" class="dropdown-item">我的中医之路-学习指南</a>
</li>
            
<li>
    <a href="../../%E4%B8%AD%E5%8C%BB/%E7%B4%A0%E9%97%AE/%E6%95%91%E5%91%BD%E7%A8%BB%E8%8D%89/" class="dropdown-item">救命稻草</a>
</li>
            
<li>
    <a href="../../%E4%B8%AD%E5%8C%BB/%E7%B4%A0%E9%97%AE/%E6%96%B0%E6%96%87%E6%A1%A3/" class="dropdown-item">新文档</a>
</li>
            
<li>
    <a href="../../%E4%B8%AD%E5%8C%BB/%E7%B4%A0%E9%97%AE/%E6%B1%A4%E5%A4%B4%E6%AD%8C%E8%AF%80/" class="dropdown-item">汤头歌诀</a>
</li>
            
<li>
    <a href="../../%E4%B8%AD%E5%8C%BB/%E7%B4%A0%E9%97%AE/%E9%BB%84%E5%B8%9D%E5%86%85%E7%BB%8F_%E5%85%BB%E7%94%9F/" class="dropdown-item">黄帝内经_养生</a>
</li>
    </ul>
  </li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">人工智能 <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD/%E5%B8%B8%E8%A7%81%E7%AE%97%E6%B3%95%E4%BC%98%E7%BC%BA%E7%82%B9/" class="dropdown-item">常见算法优缺点</a>
</li>
                                    
<li>
    <a href="../../%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD/%E8%AF%AD%E8%A8%80%E6%A8%A1%E5%9E%8B%E5%8E%9F%E7%90%86/" class="dropdown-item">语言模型原理</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">修行 <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../%E4%BF%AE%E8%A1%8C/%E4%BB%99%E4%BC%A0%E7%8E%84%E6%9C%BA%E5%8F%A3%E8%AF%80/" class="dropdown-item">仙传玄机口诀</a>
</li>
                                    
<li>
    <a href="../../%E4%BF%AE%E8%A1%8C/%E4%BF%AE%E8%A1%8C%E5%87%BA%E5%81%8F/" class="dropdown-item">修行出偏</a>
</li>
                                    
<li>
    <a href="../../%E4%BF%AE%E8%A1%8C/%E5%85%B3%E4%BA%8E%E4%B8%B9%E9%81%93%E4%B8%8B%E6%89%8B%E5%90%8E%E6%AC%B2%E6%9C%9B%E5%BC%BA%E7%83%88%E7%9A%84%E9%97%AE%E9%A2%98/" class="dropdown-item">关于丹道下手后欲望强烈的问题</a>
</li>
                                    
<li>
    <a href="../../%E4%BF%AE%E8%A1%8C/%E5%85%B3%E4%BA%8E%E4%B8%B9%E9%81%93%E5%88%9D%E5%AD%A6%E8%80%85%E4%B8%8B%E6%89%8B%E5%AE%9E%E4%BF%AE%E5%8A%9F%E5%A4%AB/" class="dropdown-item">关于丹道初学者下手实修功夫</a>
</li>
                                    
<li>
    <a href="../../%E4%BF%AE%E8%A1%8C/%E5%85%B3%E4%BA%8E%E4%B8%B9%E9%81%93%E6%B2%BB%E7%97%85/" class="dropdown-item">关于丹道治病</a>
</li>
                                    
<li>
    <a href="../../%E4%BF%AE%E8%A1%8C/%E5%A5%B3%E7%94%9F%E6%83%B3%E8%A6%81%E4%BF%AE%E9%81%93%E8%A6%81%E6%80%8E%E4%B9%88%E5%81%9A/" class="dropdown-item">女生修道怎么做-两篇</a>
</li>
                                    
<li>
    <a href="../../%E4%BF%AE%E8%A1%8C/%E6%96%B0%E4%BA%BA%E4%B8%B9%E9%81%93%E9%81%BF%E5%9D%91/" class="dropdown-item">新人丹道避坑</a>
</li>
                                    
<li>
    <a href="../../%E4%BF%AE%E8%A1%8C/%E6%9C%89%E4%BA%BA%E8%AF%B4%E4%B8%B9%E9%81%93%E7%81%AB%E5%80%99%E4%B8%8D%E8%83%BD%E9%9D%A0%E8%87%AA%E5%B7%B1%E6%8F%A3%E6%91%A9%EF%BC%8C%E5%8F%AA%E8%83%BD%E9%9D%A0%E5%B8%88%E6%89%BF%E5%8F%A3%E8%AF%80%E3%80%82%E9%82%A3%E4%B9%88%EF%BC%8C%E6%9C%80%E5%BC%80%E5%A7%8B%E7%9A%84%E5%8A%9F%E6%B3%95%E6%98%AF%E5%A6%82%E4%BD%95%E5%87%BA%E7%8E%B0%E7%9A%84/" class="dropdown-item">有人说丹道火候不能靠自己揣摩，只能靠师承口诀。那么，最开始的功法是如何出现的</a>
</li>
                                    
<li>
    <a href="../../%E4%BF%AE%E8%A1%8C/%E6%B3%95%E6%9C%AF%E7%9A%84%E6%80%9D%E8%80%83/" class="dropdown-item">为什么比干挖了心之后走出大殿没死，妲己告诉他空心菜无心人他就死了？</a>
</li>
                                    
<li>
    <a href="../../%E4%BF%AE%E8%A1%8C/%E6%B8%85%E9%9D%99%E7%BB%8F/" class="dropdown-item">清静经</a>
</li>
                                    
<li>
    <a href="../../%E4%BF%AE%E8%A1%8C/%E7%A5%9E%E6%A3%8D%E7%90%86%E8%AE%BA/" class="dropdown-item">神棍理论</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">前端 <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../%E5%89%8D%E7%AB%AF/node_sass/" class="dropdown-item">Node sass</a>
</li>
                                    
<li>
    <a href="../../%E5%89%8D%E7%AB%AF/nodejs%E7%8E%AF%E5%A2%83/" class="dropdown-item">Nodejs环境</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown active">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">大数据 <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../ES%E6%80%A7%E8%83%BD%E6%8C%87%E6%A0%87%E4%B8%8E%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5/" class="dropdown-item">ES性能指标</a>
</li>
                                    
<li>
    <a href="../ElasticSearch/" class="dropdown-item">ElasticSearch技巧</a>
</li>
                                    
<li>
    <a href="../ElasticSearch%E4%BD%BF%E7%94%A8/" class="dropdown-item">Elasticsearch使用</a>
</li>
                                    
<li>
    <a href="../ElasticSearch%E5%A4%A7%E7%89%88%E6%9C%AC%E5%8D%87%E7%BA%A7/" class="dropdown-item">大版本升级方案</a>
</li>
                                    
<li>
    <a href="../ElasticSearch%E6%8A%80%E5%B7%A7/" class="dropdown-item">ElasticSearch技巧</a>
</li>
                                    
<li>
    <a href="../Flink_sql_ETL%E9%9B%86%E5%90%88/" class="dropdown-item">Flink-sql-ETL集合</a>
</li>
                                    
<li>
    <a href="../Flink%E5%B8%B8%E7%94%A8%E8%BF%9E%E6%8E%A5%E5%99%A8%E8%AF%BB%E5%86%99%E8%83%BD%E5%8A%9B%E6%B1%87%E6%80%BB/" class="dropdown-item">Flink常用connector支持情况</a>
</li>
                                    
<li>
    <a href="../GP%E5%B8%B8%E7%94%A8%E9%85%8D%E7%BD%AE%E9%A1%B9/" class="dropdown-item">GP常用配置项</a>
</li>
                                    
<li>
    <a href="./" class="dropdown-item active">Greenplum移除Segment</a>
</li>
                                    
<li>
    <a href="../Kafka%E7%9B%B8%E5%85%B3/" class="dropdown-item">Kafka相关</a>
</li>
                                    
<li>
    <a href="../Kafka%E7%B3%BB%E7%BB%9F%E8%B0%83%E4%BC%98%E6%B5%8B%E8%AF%95/" class="dropdown-item">kafka调优</a>
</li>
                                    
<li>
    <a href="../Kafka%E8%B0%83%E4%BC%98%E7%9B%B8%E5%85%B3/" class="dropdown-item">Kafka调优相关</a>
</li>
                                    
<li>
    <a href="../cdh_spark/" class="dropdown-item">cdh编写spark依赖问题</a>
</li>
                                    
<li>
    <a href="../flinksql%E5%B8%B8%E7%94%A8%E5%8F%82%E6%95%B0%E8%AE%BE%E7%BD%AE/" class="dropdown-item">Flinksql常用参数设置</a>
</li>
                                    
<li>
    <a href="../flink%E9%85%8D%E7%BD%AE%E8%B0%83%E4%BC%98/" class="dropdown-item">flink 配置调优</a>
</li>
                                    
<li>
    <a href="../flink%E9%9B%86%E7%BE%A4%E6%90%AD%E5%BB%BA/" class="dropdown-item">flink集群搭建</a>
</li>
                                    
<li>
    <a href="../gp6%E5%BA%93%E6%80%A7%E8%83%BD%E6%B5%8B%E8%AF%95/" class="dropdown-item">gp</a>
</li>
                                    
<li>
    <a href="../greenplum%E9%9B%86%E7%BE%A4%E4%BD%BF%E7%94%A8/" class="dropdown-item">greenplum集群使用</a>
</li>
                                    
<li>
    <a href="../greenplum%E9%9B%86%E7%BE%A4%E6%90%AD%E5%BB%BA/" class="dropdown-item">greenplum集群搭建</a>
</li>
                                    
<li>
    <a href="../kafka%E6%80%A7%E8%83%BD%E6%B5%8B%E8%AF%95/" class="dropdown-item">kafka性能测试</a>
</li>
                                    
<li>
    <a href="../mysql/" class="dropdown-item">Mysql</a>
</li>
                                    
<li>
    <a href="../%E5%9F%BA%E4%BA%8EDinky%E7%9A%84cdc%E6%95%B4%E5%BA%93%E5%90%8C%E6%AD%A5/" class="dropdown-item">基于Dinky的cdc整库同步</a>
</li>
                                    
<li>
    <a href="../%E5%9F%BA%E4%BA%8E%E5%AE%B9%E5%99%A8%E7%9A%84dinky_flink_kafka/" class="dropdown-item">基于容器的dinky和flink以及kafka</a>
</li>
                                    
<li>
    <a href="../%E5%9F%BA%E4%BA%8E%E5%AE%B9%E5%99%A8%E7%9A%84pyflink/" class="dropdown-item">使用基于容器的pyflink</a>
</li>
                                    
<li>
    <a href="../%E5%B8%A6%E5%AF%86%E7%A0%81%E7%9A%84kafka%E9%83%A8%E7%BD%B2/" class="dropdown-item">带用户密码的kafka搭建</a>
</li>
                                    
<li>
    <a href="../%E7%94%9F%E4%BA%A7%E7%8E%AF%E5%A2%83kafka%E9%85%8D%E7%BD%AE/" class="dropdown-item">生产环境kafka配置说明</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">数据库 <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../%E6%95%B0%E6%8D%AE%E5%BA%93/Arm64%E7%89%88%E6%9C%ACCitus%E8%AF%B4%E6%98%8E/" class="dropdown-item">初始化数据库</a>
</li>
                                    
<li>
    <a href="../../%E6%95%B0%E6%8D%AE%E5%BA%93/Citus%E9%9B%86%E7%BE%A4%E4%BD%BF%E7%94%A8/" class="dropdown-item">Citus集群使用</a>
</li>
                                    
<li>
    <a href="../../%E6%95%B0%E6%8D%AE%E5%BA%93/GP_MDB%E9%9B%86%E7%BE%A4%E5%86%85%E5%AD%98%E9%85%8D%E7%BD%AE/" class="dropdown-item">gp/mdb集群内存配置</a>
</li>
                                    
<li>
    <a href="../../%E6%95%B0%E6%8D%AE%E5%BA%93/Lcpg%E5%86%85%E9%83%A8%E5%8F%91%E8%A1%8C%E7%89%88%E4%BD%BF%E7%94%A8/" class="dropdown-item">Lcpg内部发行版使用</a>
</li>
                                    
<li>
    <a href="../../%E6%95%B0%E6%8D%AE%E5%BA%93/Mariadb%E4%B8%BB%E4%BB%8E%E5%A4%8D%E5%88%B6/" class="dropdown-item">Mariadb主从复制</a>
</li>
                                    
<li>
    <a href="../../%E6%95%B0%E6%8D%AE%E5%BA%93/Mariadb%E5%A4%9A%E4%B8%BB%E9%9B%86%E7%BE%A4%E6%90%AD%E5%BB%BA/" class="dropdown-item">Mariadb多主集群搭建</a>
</li>
                                    
<li>
    <a href="../../%E6%95%B0%E6%8D%AE%E5%BA%93/Mysql%E6%95%85%E9%9A%9C%E6%81%A2%E5%A4%8D/" class="dropdown-item">mysql故障恢复</a>
</li>
                                    
<li>
    <a href="../../%E6%95%B0%E6%8D%AE%E5%BA%93/Neo4j%E7%9B%B8%E5%85%B3/" class="dropdown-item">Neo4j相关</a>
</li>
                                    
<li>
    <a href="../../%E6%95%B0%E6%8D%AE%E5%BA%93/Pg%E5%8E%9F%E7%94%9F%E9%9B%86%E7%BE%A4%E5%A4%8D%E5%88%B6%E9%85%8D%E7%BD%AE%E4%B8%8E%E9%AB%98%E5%8F%AF%E7%94%A8/" class="dropdown-item">PG原生集群复制配置与高可用</a>
</li>
                                    
<li>
    <a href="../../%E6%95%B0%E6%8D%AE%E5%BA%93/Postgresql/" class="dropdown-item">Postgresql相关</a>
</li>
                                    
<li>
    <a href="../../%E6%95%B0%E6%8D%AE%E5%BA%93/Postgresql%E7%9B%B8%E5%85%B3/" class="dropdown-item">Postgresql相关</a>
</li>
                                    
<li>
    <a href="../../%E6%95%B0%E6%8D%AE%E5%BA%93/Postgresql%E9%9B%86%E7%BE%A4/" class="dropdown-item">pg集群搭建</a>
</li>
                                    
<li>
    <a href="../../%E6%95%B0%E6%8D%AE%E5%BA%93/Redis%E4%BD%BF%E7%94%A8%E7%9B%B8%E5%85%B3/" class="dropdown-item">Redis相关</a>
</li>
                                    
<li>
    <a href="../../%E6%95%B0%E6%8D%AE%E5%BA%93/Redis%E9%9B%86%E7%BE%A4%E7%9B%B8%E5%85%B3/" class="dropdown-item">Redis集群相关</a>
</li>
                                    
<li>
    <a href="../../%E6%95%B0%E6%8D%AE%E5%BA%93/gp_mdb%E7%A1%AC%E4%BB%B6%E9%80%89%E5%9E%8B%E8%AE%A1%E5%88%92/" class="dropdown-item">gp与mdb硬件选型计划</a>
</li>
                                    
<li>
    <a href="../../%E6%95%B0%E6%8D%AE%E5%BA%93/mysql_mariadb/" class="dropdown-item">mysql/mariadb</a>
</li>
                                    
<li>
    <a href="../../%E6%95%B0%E6%8D%AE%E5%BA%93/mysql%E5%88%A0%E9%99%A4%E5%A4%A7%E8%A1%A8/" class="dropdown-item">mysql删除大表</a>
</li>
                                    
<li>
    <a href="../../%E6%95%B0%E6%8D%AE%E5%BA%93/mysql%E6%88%96mariadb/" class="dropdown-item">Mysql或mariadb</a>
</li>
                                    
<li>
    <a href="../../%E6%95%B0%E6%8D%AE%E5%BA%93/neo4j/" class="dropdown-item">Neo4j相关</a>
</li>
                                    
<li>
    <a href="../../%E6%95%B0%E6%8D%AE%E5%BA%93/pipelinedb/" class="dropdown-item">pipelinedb流式数据库介绍</a>
</li>
                                    
<li>
    <a href="../../%E6%95%B0%E6%8D%AE%E5%BA%93/pipelinedb%E6%B5%81%E5%BC%8F%E6%95%B0%E6%8D%AE%E5%BA%93%E4%BB%8B%E7%BB%8D/" class="dropdown-item">Pipelinedb流式数据库介绍</a>
</li>
                                    
<li>
    <a href="../../%E6%95%B0%E6%8D%AE%E5%BA%93/timescaledb/" class="dropdown-item">Timescaledb</a>
</li>
                                    
<li>
    <a href="../../%E6%95%B0%E6%8D%AE%E5%BA%93/%E6%97%B6%E5%BA%8F%E6%95%B0%E6%8D%AE%E5%BA%93/" class="dropdown-item">时序数据库</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">架构设计 <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1/%E6%96%B0%E4%B8%9C%E8%A5%BF%E7%A7%AF%E7%B4%AF/" class="dropdown-item">新东西积累</a>
</li>
                                    
<li>
    <a href="../../%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1/%E7%BB%8F%E9%AA%8C%E7%B4%AF%E7%A7%AF/" class="dropdown-item">经验累积</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">经济 <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../%E7%BB%8F%E6%B5%8E/%E4%BB%8E%E6%9C%9F%E8%B4%A7%E8%B5%9A%E5%88%B0%E4%B8%80%E5%8D%83%E4%B8%87/" class="dropdown-item">从期货赚到一千万</a>
</li>
                                    
<li>
    <a href="../../%E7%BB%8F%E6%B5%8E/%E5%85%AD%E7%88%BB%E6%B5%8B%E8%82%A1%E7%A5%A8/" class="dropdown-item">六爻预测股票起卦方法（很重要）</a>
</li>
                                    
<li>
    <a href="../../%E7%BB%8F%E6%B5%8E/%E5%BD%BC%E5%BE%97%E6%9E%97%E5%A5%87%E7%AC%94%E8%AE%B0/" class="dropdown-item">彼得林奇笔记</a>
</li>
                                    
<li>
    <a href="../../%E7%BB%8F%E6%B5%8E/%E8%B6%85%E4%BD%8E%E4%BB%B7%E9%A2%84%E5%94%AE%E5%A5%97%E8%B7%AF/" class="dropdown-item">超低价预售套路</a>
</li>
                                </ul>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav ml-auto">
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-toggle="modal" data-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                            <li class="nav-item">
                                <a rel="prev" href="../GP%E5%B8%B8%E7%94%A8%E9%85%8D%E7%BD%AE%E9%A1%B9/" class="nav-link">
                                    <i class="fa fa-arrow-left"></i> Previous
                                </a>
                            </li>
                            <li class="nav-item">
                                <a rel="next" href="../Kafka%E7%9B%B8%E5%85%B3/" class="nav-link">
                                    Next <i class="fa fa-arrow-right"></i>
                                </a>
                            </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
            <div class="row">
                    <div class="col-md-3"><div class="navbar-light navbar-expand-md bs-sidebar hidden-print affix" role="complementary">
    <div class="navbar-header">
        <button type="button" class="navbar-toggler collapsed" data-toggle="collapse" data-target="#toc-collapse" title="Table of Contents">
            <span class="fa fa-angle-down"></span>
        </button>
    </div>

    
    <div id="toc-collapse" class="navbar-collapse collapse card bg-secondary">
        <ul class="nav flex-column">
            
            <li class="nav-item" data-level="1"><a href="#greenplumsegment" class="nav-link">Greenplum移除Segment</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            
            <li class="nav-item" data-level="1"><a href="#connect-to-hadoop920001-from-hadoop9" class="nav-link">connect to hadoop9:20001 from hadoop9</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            
            <li class="nav-item" data-level="1"><a href="#connect-to-hadoop920002-from-hadoop7" class="nav-link">connect to hadoop9:20002 from hadoop7</a>
              <ul class="nav flex-column">
              </ul>
            </li>
        </ul>
    </div>
</div></div>
                    <div class="col-md-9" role="main">

<h1 id="greenplumsegment">Greenplum移除Segment</h1>
<p>刚才登陆上来看到以前写的一篇文章扩展greenplum集群 下面有人回帖问如何裁剪SEGMENT。因为并没有看到GREENPLUM提供什么工具可以去除某些已经在使用的SEGMENT的。刚刚去试了一下，好像可以，只能说好像可以。下面把操作步骤贴出来，大家也可以一起看看有没有什么问题。</p>
<p>下面是现有集群的一个大致情况</p>
<p>testutf8=# select * from gp_configuration;
content | definedprimary | dbid | isprimary | valid | hostname | port  |             datadir
———+—————-+——+———–+——-+———-+——-+———————————-
-1 | t              |    1 | t         | t     | hadoop7  |  5345 | /home/gpadmin1/gp3master/aligp-1
0 | f              |    8 | f         | t     | hadoop8  | 30001 | /home/gpadmin1/gp3datam1/aligp0
1 | f              |    9 | f         | t     | hadoop8  | 30002 | /home/gpadmin1/gp3datam2/aligp1
0 | t              |    2 | t         | t     | hadoop7  | 20001 | /home/gpadmin1/gp3datap1/aligp0
1 | t              |    3 | t         | t     | hadoop7  | 20002 | /home/gpadmin1/gp3datap2/aligp1
3 | t              |    5 | t         | t     | hadoop8  | 20002 | /home/gpadmin1/gp3datap2/aligp3
-1 | f              |   14 | f         | t     | hadoop8  |  5345 | /home/gpadmin1/gp3master/aligp-1
2 | t              |    4 | t         | t     | hadoop8  | 20001 | /home/gpadmin1/gp3datap1/aligp2
2 | f              |   10 | f         | t     | hadoop9  | 30001 | /home/gpadmin1/gp3datam1/aligp2
3 | f              |   11 | f         | t     | hadoop9  | 30002 | /home/gpadmin1/gp3datam2/aligp3
4 | f              |   12 | f         | t     | hadoop7  | 30001 | /home/gpadmin1/gp3datam1/aligp4
5 | f              |   13 | f         | t     | hadoop7  | 30002 | /home/gpadmin1/gp3datam2/aligp5
4 | t              |    6 | t         | t     | hadoop9  | 20001 | /home/gpadmin1/gp3datap1/aligp4
5 | t              |    7 | t         | t     | hadoop9  | 20002 | /home/gpadmin1/gp3datap2/aligp5 –标为红色的部分即为要删除的SEGMENT
(14 rows)
–创建两张表t1，t2.在后面的操作中我不会对t1进行特殊处理，因此理论上删除某个SEGMENT以后它上面的数据会有所减少。而对于t2，我会在修改集群配置以前把在要被删除的那些SEGMENT上的数据手动迁移到其他保留的SEGMENT上。
testutf8=# create table t1 as select nextval(’seq1′) from pg_class;
NOTICE:  Table doesn’t have ‘DISTRIBUTED BY’ clause — Using column(s) named ‘nextval’ as the Greenplum Database data distribution key for this table.
HINT:  The ‘DISTRIBUTED BY’ clause determines the distribution of data. Make sure column(s) chosen are the optimal data distribution key to minimize skew.
SELECT 267
testutf8=# select gp_segment_id,count(1) from t1 group by 1;
gp_segment_id | count
—————+——-
1 |    43
4 |    48
2 |    42
0 |    44
3 |    41
5 |    49
(6 rows)</p>
<p>testutf8=# create table t2 as select nextval(’seq1′) from pg_class;
NOTICE:  Table doesn’t have ‘DISTRIBUTED BY’ clause — Using column(s) named ‘nextval’ as the Greenplum Database data distribution key for this table.
HINT:  The ‘DISTRIBUTED BY’ clause determines the distribution of data. Make sure column(s) chosen are the optimal data distribution key to minimize skew.
SELECT 268
testutf8=# select gp_segment_id,count(1) from t2 group by 1;
gp_segment_id | count
—————+——-
1 |    44
2 |    43
0 |    41
4 |    49
3 |    42
5 |    49
(6 rows)</p>
<p>下面几步所做的就是对t2表的在将被删除的SEGMENT上的数据进行迁移</p>
<h1 id="connect-to-hadoop920001-from-hadoop9">connect to hadoop9:20001 from hadoop9</h1>
<p>[gpadmin1@hadoop9 ~]$ PGOPTIONS=”-c gp_session_role=utility” psql -h hadoop9 -p 20001 -U r1</p>
<p>psql (8.2.13)
Type “help” for help.</p>
<p>testutf8=#
testutf8=# select count(*) from t2;
count
——-
49
(1 row)</p>
<p>testutf8=# select * from t2 limit 1;        –这里随便查出一条数据，在集群相应的SEGMENT被去除以后，可以用来验证这条数据是否还存在集群中
nextval
———
810
(1 row)</p>
<p>testutf8=# copy t2 to ‘/home/gpadmin1/hadoop9_20001_t2′;     –通过COPY命令把t2在此SEGMENT上的数据备份出来
COPY 49</p>
<h1 id="connect-to-hadoop920002-from-hadoop7">connect to hadoop9:20002 from hadoop7</h1>
<p>[gpadmin1@hadoop7 ~]$ PGOPTIONS=”-c gp_session_role=utility” psql -h hadoop9 -p 20002 -U r1
psql (8.2.13)
Type “help” for help.</p>
<p>testutf8=# select count(*) from t2;
count
——-
49
(1 row)</p>
<p>testutf8=# select * from t2 limit 1;
nextval
———
811
(1 row)</p>
<p>testutf8=# copy t2 to ‘/home/gpadmin1/hadoop9_20002_t2′;
COPY 49</p>
<p>[gpadmin1@hadoop9 ~]$ ls
1.sh        conf         gp3datam1  gp3datap1  gp3master  gp4datam2  gp4datap2    hadoop9_20001_t2 hy         pgback    t3</p>
<p>cleangp.sh  cpgp_cfg.sh  gp3datam2  gp3datap2  gp4datam1  gp4datap1  gpAdminLogs  hadoop9_20002_t2 joe.wangh  software  tools
[gpadmin1@hadoop9 ~]$ PGOPTIONS=”-c gp_session_role=utility” psql -h hadoop7 -p 20001 -U r1
psql (8.2.13)
Type “help” for help.
testutf8=# copy t2 from ‘/home/gpadmin1/hadoop9_20001_t2′;
ERROR:  could not open file “/home/gpadmin1/hadoop9_20001_t2″ for reading: No such file or directory
testutf8=# /q</p>
<p>–这里因为我连接到的是HADOOP7:20001的SEGMENT,而刚才两个COPY出来的文件都在HADOOP9上，因此需要SCP到HADOOP7上进行应用。
[gpadmin1@hadoop9 ~]$ scp hadoop9_20001_t2 hadoop7:/home/gpadmin1/
hadoop9_20001_t2                                                                                  100%  211     0.2KB/s   00:00
[gpadmin1@hadoop9 ~]$ scp hadoop9_20002_t2 hadoop7:/home/gpadmin1/
hadoop9_20002_t2                                                                                  100%  212     0.2KB/s   00:00
[gpadmin1@hadoop9 ~]$ PGOPTIONS=”-c gp_session_role=utility” psql -h hadoop7 -p 20001 -U r1
psql (8.2.13)
Type “help” for help.</p>
<p>testutf8=# copy t2 from ‘/home/gpadmin1/hadoop9_20001_t2′;
COPY 49
testutf8=# copy t2 from ‘/home/gpadmin1/hadoop9_20002_t2′;
COPY 49
testutf8=# select count(*) from t2;
count
——-
139               –从前面t2表在各个segment上分布的情况可以看到，41+49+49=139，正好是gp_segment_id为0，4，5之和
(1 row)</p>
<p>OK，下面我们可以把数据库正常关闭了。</p>
<p>[gpadmin1@hadoop7 pg_log]$ gpstop
20101127:20:52:19:gpstop:hadoop7:gpadmin1-[INFO]:-Starting gpstop with args: ”
20101127:20:52:19:gpstop:hadoop7:gpadmin1-[INFO]:-Gathering information and validating the environment…
20101127:20:52:19:gpstop:hadoop7:gpadmin1-[INFO]:-Obtaining Greenplum Master catalog information
20101127:20:52:19:gpstop:hadoop7:gpadmin1-[INFO]:-Obtaining Segment details from master…
20101127:20:52:19:gpstop:hadoop7:gpadmin1-[INFO]:-Greenplum Version: ‘postgres (Greenplum Database) 3.3.7.0 build 1′
20101127:20:52:19:gpstop:hadoop7:gpadmin1-[INFO]:———————————————
20101127:20:52:19:gpstop:hadoop7:gpadmin1-[INFO]:-Master instance parameters
20101127:20:52:19:gpstop:hadoop7:gpadmin1-[INFO]:———————————————
20101127:20:52:19:gpstop:hadoop7:gpadmin1-[INFO]:-Master Greenplum instance process active PID = 22683
20101127:20:52:19:gpstop:hadoop7:gpadmin1-[INFO]:-Database                                     = template1
20101127:20:52:19:gpstop:hadoop7:gpadmin1-[INFO]:-Master Port                                  = 5345
20101127:20:52:19:gpstop:hadoop7:gpadmin1-[INFO]:-Master directory                             = /home/gpadmin1/gp3master/aligp-1
20101127:20:52:19:gpstop:hadoop7:gpadmin1-[INFO]:-Shutdown mode                                = smart
20101127:20:52:19:gpstop:hadoop7:gpadmin1-[INFO]:-Shutdown Master standby host                 = On
20101127:20:52:19:gpstop:hadoop7:gpadmin1-[INFO]:———————————————
20101127:20:52:19:gpstop:hadoop7:gpadmin1-[INFO]:-Segment instances that will be shutdown:
20101127:20:52:19:gpstop:hadoop7:gpadmin1-[INFO]:———————————————
20101127:20:52:19:gpstop:hadoop7:gpadmin1-[INFO]:-Host     Datadir                          Port   Status
20101127:20:52:19:gpstop:hadoop7:gpadmin1-[INFO]:-hadoop7  /home/gpadmin1/gp3datap1/aligp0  20001  Valid
20101127:20:52:19:gpstop:hadoop7:gpadmin1-[INFO]:-hadoop8  /home/gpadmin1/gp3datam1/aligp0  30001  Valid
20101127:20:52:19:gpstop:hadoop7:gpadmin1-[INFO]:-hadoop7  /home/gpadmin1/gp3datap2/aligp1  20002  Valid
20101127:20:52:19:gpstop:hadoop7:gpadmin1-[INFO]:-hadoop8  /home/gpadmin1/gp3datam2/aligp1  30002  Valid
20101127:20:52:19:gpstop:hadoop7:gpadmin1-[INFO]:-hadoop8  /home/gpadmin1/gp3datap1/aligp2  20001  Valid
20101127:20:52:19:gpstop:hadoop7:gpadmin1-[INFO]:-hadoop9  /home/gpadmin1/gp3datam1/aligp2  30001  Valid
20101127:20:52:19:gpstop:hadoop7:gpadmin1-[INFO]:-hadoop8  /home/gpadmin1/gp3datap2/aligp3  20002  Valid
20101127:20:52:19:gpstop:hadoop7:gpadmin1-[INFO]:-hadoop9  /home/gpadmin1/gp3datam2/aligp3  30002  Valid
20101127:20:52:19:gpstop:hadoop7:gpadmin1-[INFO]:-hadoop9  /home/gpadmin1/gp3datap1/aligp4  20001  Valid
20101127:20:52:19:gpstop:hadoop7:gpadmin1-[INFO]:-hadoop7  /home/gpadmin1/gp3datam1/aligp4  30001  Valid
20101127:20:52:19:gpstop:hadoop7:gpadmin1-[INFO]:-hadoop9  /home/gpadmin1/gp3datap2/aligp5  20002  Valid
20101127:20:52:19:gpstop:hadoop7:gpadmin1-[INFO]:-hadoop7  /home/gpadmin1/gp3datam2/aligp5  30002  Valid</p>
<p>Continue with Greenplum instance shutdown Yy|Nn (default=N):</p>
<blockquote>
<p>y
20101127:20:52:20:gpstop:hadoop7:gpadmin1-[INFO]:-There are 0 connections to the database
20101127:20:52:20:gpstop:hadoop7:gpadmin1-[INFO]:-Commencing Master instance shutdown with mode=’smart’
20101127:20:52:20:gpstop:hadoop7:gpadmin1-[INFO]:-Master host=hadoop7
20101127:20:52:20:gpstop:hadoop7:gpadmin1-[INFO]:-Commencing Master instance shutdown with mode=smart
20101127:20:52:20:gpstop:hadoop7:gpadmin1-[INFO]:-Master segment instance directory=/home/gpadmin1/gp3master/aligp-1
20101127:20:52:21:gpstop:hadoop7:gpadmin1-[INFO]:-Stopping gpsyncmaster on standby host hadoop8 mode=fast
20101127:20:52:22:gpstop:hadoop7:gpadmin1-[INFO]:-Successfully shutdown sync process on hadoop8
20101127:20:52:22:gpstop:hadoop7:gpadmin1-[INFO]:-Commencing parallel segment instance shutdown, please wait…
…..
20101127:20:52:27:gpstop:hadoop7:gpadmin1-[INFO]:————————————————-
20101127:20:52:27:gpstop:hadoop7:gpadmin1-[INFO]:-Parallel process exit status
20101127:20:52:27:gpstop:hadoop7:gpadmin1-[INFO]:————————————————-
20101127:20:52:27:gpstop:hadoop7:gpadmin1-[INFO]:-Total processes marked as completed         = 12
20101127:20:52:27:gpstop:hadoop7:gpadmin1-[INFO]:-Total processes marked as failed            = 0
20101127:20:52:27:gpstop:hadoop7:gpadmin1-[INFO]:————————————————-
20101127:20:52:27:gpstop:hadoop7:gpadmin1-[INFO]:-Total instances marked invalid and bypassed = 0
20101127:20:52:27:gpstop:hadoop7:gpadmin1-[INFO]:-Successfully shutdown 12 of 12 segment instances
20101127:20:52:27:gpstop:hadoop7:gpadmin1-[INFO]:-Database successfully shutdown with no errors reported</p>
</blockquote>
<p>然后使用-m参数打开数据库，更改数据字典表信息。主要更改gp_configuration和gp_id两个数据字典。一开始我只更改了gp_configuration里的信息，后来在启动的时候报错，再把gp_id里面信息更改一下就可以了。
[gpadmin1@hadoop7 pg_log]$ gpstart -m
20101127:20:53:04:gpstart:hadoop7:gpadmin1-[INFO]:-Starting gpstart with args: ‘-m’
20101127:20:53:04:gpstart:hadoop7:gpadmin1-[INFO]:-Gathering information and validating the environment…
20101127:20:53:04:gpstart:hadoop7:gpadmin1-[INFO]:-local Greenplum Version: ‘postgres (Greenplum Database) 3.3.7.0 build 1′
20101127:20:53:04:gpstart:hadoop7:gpadmin1-[INFO]:-Starting Master instance in admin mode
20101127:20:53:05:gpstart:hadoop7:gpadmin1-[INFO]:-Obtaining Greenplum Master catalog information
20101127:20:53:05:gpstart:hadoop7:gpadmin1-[INFO]:-Obtaining Segment details from master…
20101127:20:53:05:gpstart:hadoop7:gpadmin1-[INFO]:-Master Started…
[gpadmin1@hadoop7 pg_log]$ PGOPTIONS=”-c gp_session_role=utility” psql
psql (8.2.13)
Type “help” for help.</p>
<p>testutf8=# delete from gp_configuration where content=5;
DELETE 2
testutf8=# delete from gp_configuration where content=4;
DELETE 2
testutf8=# select * from gp_id;
gpname | numsegments | dbid | content
——–+————-+——+———
GP     |           6 |    1 |      -1
(1 row)</p>
<p>testutf8=# update gp_id set numsegments=4;
UPDATE 1
testutf8=# /q
[gpadmin1@hadoop7 pg_log]$ gpstop -m
20101127:20:53:46:gpstop:hadoop7:gpadmin1-[INFO]:-Starting gpstop with args: ‘-m’
20101127:20:53:46:gpstop:hadoop7:gpadmin1-[INFO]:-Gathering information and validating the environment…
20101127:20:53:46:gpstop:hadoop7:gpadmin1-[INFO]:-Obtaining Greenplum Master catalog information
20101127:20:53:46:gpstop:hadoop7:gpadmin1-[INFO]:-Obtaining Segment details from master…
20101127:20:53:46:gpstop:hadoop7:gpadmin1-[INFO]:-Greenplum Version: ‘postgres (Greenplum Database) 3.3.7.0 build 1′
20101127:20:53:46:gpstop:hadoop7:gpadmin1-[INFO]:-There are 0 connections to the database
20101127:20:53:46:gpstop:hadoop7:gpadmin1-[INFO]:-Commencing Master instance shutdown with mode=’smart’
20101127:20:53:46:gpstop:hadoop7:gpadmin1-[INFO]:-Master host=hadoop7
20101127:20:53:46:gpstop:hadoop7:gpadmin1-[INFO]:-Commencing Master instance shutdown with mode=smart
20101127:20:53:46:gpstop:hadoop7:gpadmin1-[INFO]:-Master segment instance directory=/home/gpadmin1/gp3master/aligp-1</p>
<p>关键时刻，以正常模式启动数据库试试，胜负在此一举。
[gpadmin1@hadoop7 pg_log]$ gpstart
20101127:20:54:05:gpstart:hadoop7:gpadmin1-[INFO]:-Starting gpstart with args: ”
20101127:20:54:05:gpstart:hadoop7:gpadmin1-[INFO]:-Gathering information and validating the environment…
20101127:20:54:05:gpstart:hadoop7:gpadmin1-[INFO]:-local Greenplum Version: ‘postgres (Greenplum Database) 3.3.7.0 build 1′
20101127:20:54:05:gpstart:hadoop7:gpadmin1-[INFO]:-Starting Master instance in admin mode
20101127:20:54:06:gpstart:hadoop7:gpadmin1-[INFO]:-Obtaining Greenplum Master catalog information
20101127:20:54:06:gpstart:hadoop7:gpadmin1-[INFO]:-Obtaining Segment details from master…
20101127:20:54:06:gpstart:hadoop7:gpadmin1-[INFO]:-Master Started…
20101127:20:54:06:gpstart:hadoop7:gpadmin1-[INFO]:-Shutting down master
20101127:20:54:07:gpstart:hadoop7:gpadmin1-[INFO]:—————————
20101127:20:54:07:gpstart:hadoop7:gpadmin1-[INFO]:-Master instance parameters
20101127:20:54:07:gpstart:hadoop7:gpadmin1-[INFO]:—————————
20101127:20:54:07:gpstart:hadoop7:gpadmin1-[INFO]:-Database                 = template1
20101127:20:54:07:gpstart:hadoop7:gpadmin1-[INFO]:-Master Port              = 5345
20101127:20:54:07:gpstart:hadoop7:gpadmin1-[INFO]:-Master directory         = /home/gpadmin1/gp3master/aligp-1
20101127:20:54:07:gpstart:hadoop7:gpadmin1-[INFO]:-Master standby start     = On
20101127:20:54:07:gpstart:hadoop7:gpadmin1-[INFO]:—————————————
20101127:20:54:07:gpstart:hadoop7:gpadmin1-[INFO]:-Segment instances that will be started
20101127:20:54:07:gpstart:hadoop7:gpadmin1-[INFO]:—————————————
20101127:20:54:07:gpstart:hadoop7:gpadmin1-[INFO]:-Host     Datadir                          Port   Status
20101127:20:54:07:gpstart:hadoop7:gpadmin1-[INFO]:-hadoop7  /home/gpadmin1/gp3datap1/aligp0  20001  Valid
20101127:20:54:07:gpstart:hadoop7:gpadmin1-[INFO]:-hadoop8  /home/gpadmin1/gp3datam1/aligp0  30001  Valid
20101127:20:54:07:gpstart:hadoop7:gpadmin1-[INFO]:-hadoop7  /home/gpadmin1/gp3datap2/aligp1  20002  Valid
20101127:20:54:07:gpstart:hadoop7:gpadmin1-[INFO]:-hadoop8  /home/gpadmin1/gp3datam2/aligp1  30002  Valid
20101127:20:54:07:gpstart:hadoop7:gpadmin1-[INFO]:-hadoop8  /home/gpadmin1/gp3datap1/aligp2  20001  Valid
20101127:20:54:07:gpstart:hadoop7:gpadmin1-[INFO]:-hadoop9  /home/gpadmin1/gp3datam1/aligp2  30001  Valid
20101127:20:54:07:gpstart:hadoop7:gpadmin1-[INFO]:-hadoop8  /home/gpadmin1/gp3datap2/aligp3  20002  Valid
20101127:20:54:07:gpstart:hadoop7:gpadmin1-[INFO]:-hadoop9  /home/gpadmin1/gp3datam2/aligp3  30002  Valid</p>
<p>Continue with Greenplum instance startup Yy|Nn (default=N):</p>
<blockquote>
<p>y
20101127:20:54:09:gp.py:hadoop7:gpadmin1-[INFO]:-Starting standby master
20101127:20:54:09:gp.py:hadoop7:gpadmin1-[INFO]:-Checking if standby master is running on host: hadoop8  in directory: /home/gpadmin1/gp3master/aligp-1
20101127:20:54:09:gp.py:hadoop7:gpadmin1-[INFO]:-No db instance process, entering recovery startup mode
20101127:20:54:09:gpstart:hadoop7:gpadmin1-[INFO]:-Commencing parallel segment instance startup, please wait…
…..
20101127:20:54:14:gpstart:hadoop7:gpadmin1-[INFO]:-Process results…
20101127:20:54:14:gpstart:hadoop7:gpadmin1-[INFO]:—————————————————–
20101127:20:54:14:gpstart:hadoop7:gpadmin1-[INFO]:-Total processes marked as completed             = 8
20101127:20:54:14:gpstart:hadoop7:gpadmin1-[INFO]:-Total processes marked as failed                = 0
20101127:20:54:14:gpstart:hadoop7:gpadmin1-[INFO]:—————————————————–
20101127:20:54:14:gpstart:hadoop7:gpadmin1-[INFO]:-Total instances marked invalid and bypassed     = 0
20101127:20:54:14:gpstart:hadoop7:gpadmin1-[INFO]:-Successfully started 8 of 8 segment instances
20101127:20:54:14:gpstart:hadoop7:gpadmin1-[INFO]:—————————————————–
20101127:20:54:14:gpstart:hadoop7:gpadmin1-[INFO]:-Starting Master instance hadoop7 directory /home/gpadmin1/gp3master/aligp-1
20101127:20:54:15:gpstart:hadoop7:gpadmin1-[INFO]:-Command pg_ctl reports Master hadoop7 instance active
NOTICE:  Master mirroring synchronizing
20101127:20:54:16:gpstart:hadoop7:gpadmin1-[INFO]:-Database successfully started with no errors reported</p>
</blockquote>
<p>正常启动了，现在连接上去看看刚才t1和t2表的情况如何。
[gpadmin1@hadoop7 pg_log]$ psql
psql (8.2.13)
Type “help” for help.
–这里可以看到，t1表在0，1，2，3这4个SEGMENT上的数据量没变化，也就是说在被删除的两个SEGMENT上的数据丢失了。
testutf8=# select gp_segment_id,count(1) from t1 group by 1;
gp_segment_id | count
—————+——-
0 |    44
1 |    43
2 |    42
3 |    41
(4 rows)
–在0号SEGMENT上数据量是139，也就是前面我们所说的41+49+49。
testutf8=# select gp_segment_id,count(1) from t2 group by 1;
gp_segment_id | count
—————+——-
3 |    42
0 |   139
1 |    44
2 |    43
(4 rows)</p>
<p>下面再查询一下刚才提取的t2表在被删除SEGMENT上的两个数值，看看它们是否依然可以正常被查询到。
testutf8=# /d t2
Table “public.t2″
Column  |  Type  | Modifiers
———+——–+———–
nextval | bigint |
Distributed by: (nextval)
–t2表上正常
testutf8=# select * from t2 where nextval=810;
nextval
———
810
(1 row)</p>
<p>testutf8=# select * from t2 where nextval=811;
nextval
———
811
(1 row)
–t1表上已经查不到了
testutf8=# select * from t1 where nextval=811;
nextval
———
(0 rows)</p>
<p>testutf8=# select * from t1 where nextval=810;
nextval
———
(0 rows)</p>
<p>当然，这种从GREENPLUM集群中去除SEGMENT的方法不一定是完全正确的，纯属个人YY一下然后试了试而已。</p>
<p>也许内部还是一些细节是我没有考虑到的，刚才我在这个去除了SEGMENT的集群中做了一些功能测试，结果还都是挺正常的，但是保不准哪一天他会出问题。</p>
<p>补充两点</p>
<p>1、在从gp_configuration里面删除相关信息以后，要保证剩余的SEGMENT的CONTENT列和DBID列是连续的。不然在接下 来gpstop -m的时候会报错index out of list</p>
<p>2、更改完MASTER上的gp_id以后，还要连接到各个SEGMENT上更改gp_id。如果你在前面的操作中更改了DBID和CONTENT 的话，那么在更改gp_id的时候也需要做相应的更改。</p></div>
            </div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script src="../../js/jquery-3.6.0.min.js"></script>
        <script src="../../js/bootstrap.min.js"></script>
        <script>
            var base_url = "../..",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="../../js/base.js"></script>
        <script src="../../search/main.js"></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="searchModalLabel">Search</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
                <p>From here you can search these documents. Enter your search terms below.</p>
                <form>
                    <div class="form-group">
                        <input type="search" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results" data-no-results-text="No results found"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
