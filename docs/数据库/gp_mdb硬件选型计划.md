# gp与mdb硬件选型计划

## 重点
+ 磁盘性能最重要，其他资源（cpu主频核心、网络带宽）围绕磁盘性能来决策，核心要求是：io资源必须绝对富余，cpu永远充分利用，内存和网络也必须有富余。
+ 截止gp6版本 cpu主频要求不用特别高，核心数越多越好。
+ 生产环境建议256G以上，一个primary最少不低于30GB内存。
+ 内联网络必须万兆带宽起步，为了网络的高可用建议使用两个万兆口，对于超大规模的集群应该考虑对master配置更多的网口做链路聚合，例如100台以上的集群需要4个万兆口做链路聚合。
+ raid卡性能例如24块机械盘起码需要配置2GB以上cache的双通道raid卡，否则将会大幅度的影响性能发挥。
+ 容量评估方面，简便计算 数据库可用空间=裸容量*0.6 再根据是否配置mirror来确定是否需要再 * 0.5 
+ 机房规划：建议讲master和standby放在不同机柜，计算节点分组放在不同机柜，如果有条件可以将有镜像关系的机柜分开供电，可以确保单个机柜出现断电的情况依然提供服务。
+ 文件系统要求：对于网络文件系统或者共享存储，也必须挂载为本地XFS文件系统。非本地磁盘的文件系统，虽然支持，但不推荐，对于GP来说，都是本地目录，不会区分对待不同的存储。网络文件系统或者共享存储，虽然可以运行，但性能和可靠性无法保证。
+ 建议swap空间为内存的一半。
+ xfs挂载参数：`rw,nodev,noatime,nobarrier,inode64`
+ 